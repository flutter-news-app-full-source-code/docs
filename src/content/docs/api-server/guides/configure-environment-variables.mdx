---
title: Configure Environment Variables
description: A detailed guide to setting up the .env file for the API server.
---

import { Aside } from '@astrojs/starlight/components';

The API server uses an `.env` file to manage environment-specific configuration, such as database connection strings and secret keys. This approach keeps sensitive data out of your source code.

This guide explains each variable found in the `.env.example` file.

### Creating Your `.env` File

First, copy the example file to create your local configuration file. Run this command from the `flutter-news-app-api-server-full-source-code` directory:

```bash
cp .env.example .env
```

Now, open the new `.env` file and fill in the values as described below.

---

### Required Variables

These variables are essential for the server to function correctly.

#### `DATABASE_URL`
The full connection string for your MongoDB instance. The application cannot start without a valid database connection.

-   **Local Development:** `mongodb://localhost:27017/your_db_name`
-   **Production:** Use the connection string provided by your database hosting service (e.g., MongoDB Atlas).

<Aside type="tip">
For guidance on setting up a local MongoDB instance, see the [Configure MongoDB](/docs/api-server/guides/configure-mongodb) guide.
</Aside>

#### `JWT_SECRET_KEY`
A long, random password used to secure your API.

*   **How to Generate:** The easiest way is to use a free online generator. Search for "**JWT secret generator**" and create a key that is **at least 64 characters long**. Copy the key it gives you.
*   **Security:** Keep it secret! Never save this key in your code or commit it to version control.

#### `SENDGRID_API_KEY`
Your API key for the SendGrid service, which is used to send transactional emails like One-Time Passwords (OTPs).

-   **How to Obtain:**
    1.  create a free [SendGrid account](https://signup.sendgrid.com/).
    2.  create your API key, follow the [official SendGrid guide](https://www.twilio.com/docs/sendgrid/ui/account-and-settings/api-keys#creating-an-api-key).
    3.  Copy the generated key and paste it here.

#### `DEFAULT_SENDER_EMAIL`
The email address that will appear as the sender for all transactional emails. This should be an email address you have verified with SendGrid.

<Aside type="caution">
SendGrid requires you to prove you own this email address to prevent it from rejecting your emails. This is done through a process called "Single Sender Verification".
</Aside>

**How to Verify:** Follow the [official SendGrid guide](https://www.twilio.com/docs/sendgrid/ui/sending-email/sender-verification). You will need to click a confirmation link sent to that address.


#### `OTP_TEMPLATE_ID`
The ID of the dynamic email template in SendGrid used for sending OTP codes.

-    **Steps to Create the Template:**

    1.  Go directly to SendGrid's [**Dynamic Templates page**](https://mc.sendgrid.com/dynamic-templates).

    2.  Click "**Create a Dynamic Template**" and give it a name (e.g., "OTP Template").

    3.  Click your new template, then click "**Add Version**" and choose the "Blank Template" then the  "**Code Editor**".

    4.  Empty all existing HTML code then paste the code below. It includes the required `{{otp_code}}` placeholder.


    ```html
    <!DOCTYPE html>
    <html>
    <head>
      <title>Your One-Time Password</title>
    </head>
    <body style="font-family: sans-serif; text-align: center; padding: 40px;">
      <div style="max-width: 600px; margin: auto; border: 1px solid #ddd; padding: 20px; border-radius: 8px;">
        <h2 style="color: #333;">Your One-Time Password</h2>
        <p style="color: #555;">Use the code below to complete your sign-in.</p>
        <div style="font-size: 36px; font-weight: bold; letter-spacing: 5px; margin: 20px 0; padding: 15px; background-color: #f5f5f5; border-radius: 5px;">
          {{otp_code}}
        </div>
        <p style="color: #888; font-size: 12px;">This code will expire in 10 minutes. If you did not request this, please ignore this email.</p>
      </div>
    </body>
    </html>
    ```
5.  **Save the template**. Go back to the main Dynamic Templates page and copy the **Template ID**. You will need this ID for your server configuration.

### Optional Variables

These variables have default values but can be customized for your environment.

#### `JWT_EXPIRY_HOURS`
The duration, in hours, for which a JWT is valid.
-   **Default:** `1` (1 hour)

#### `CORS_ALLOWED_ORIGIN`
The specific origin URL of your web client (e.g., the Flutter Web Dashboard) that is allowed to make requests to this API. This is **required for production** to prevent Cross-Origin Resource Sharing (CORS) errors.
-   **Example:** `https://dashboard.yourdomain.com`

<Aside type="caution">
For more details on CORS, see the [Configure CORS](/docs/api-server/guides/configure-cors) guide.
</Aside>

#### `SENDGRID_API_URL`
The base URL for the SendGrid API.
-   **Default:** `https://api.sendgrid.com`
-   **EU Accounts:** If your SendGrid account is based in the EU, you may need to set this to `https://api.eu.sendgrid.com`.
