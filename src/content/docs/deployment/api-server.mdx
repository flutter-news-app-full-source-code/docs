---
title: Deployment Guide
description: Learn how to deploy the API server to a production environment.
---

import { Steps, Aside } from '@astrojs/starlight/components';

This guide covers the essential steps for deploying the Dart Frog API server to a production environment. The recommended approach is to build a Docker container and host it on a service that supports containerized applications.

<Steps>
1.  **Production Build**

    First, create a production-optimized build of your Dart Frog server. This compiles the application and collects all necessary assets.

    Run the following command from the root of your API server project:
    ```bash
    dart_frog build
    ```
    This will generate a `build` directory containing the production-ready server.

2.  **Environment Configuration**

    For production, you must configure your environment variables securely. Do **not** commit your `.env` file to version control. Instead, use the environment variable management system provided by your hosting provider.

    The following variables are **critical** for a production environment:

    -   `DATABASE_URL`: The connection string for your production MongoDB database.
    -   `JWT_SECRET_KEY`: A long, secure, randomly generated secret for signing tokens.
    -   `CORS_ALLOWED_ORIGIN`: The full URL of your deployed web dashboard (e.g., `https://your-dashboard.com`). This is crucial for security.
    -   `SENDGRID_API_KEY`: Your production SendGrid API key.
    -   `DEFAULT_SENDER_EMAIL`: The email address for sending transactional emails.
    -   `OTP_TEMPLATE_ID`: The SendGrid template ID for your OTP email.

3.  **Docker Deployment (Recommended)**

    The API server project includes a `Dockerfile` that simplifies deployment. This file defines the steps to create a lightweight, production-ready container image.

    <Aside type="note">
    The provided `Dockerfile` is multi-stage, ensuring the final image is small and secure, containing only the compiled application and its runtime dependencies.
    </Aside>

    **Building the Docker Image:**
    ```bash
    docker build -t your-api-server-image .
    ```

    **Running the Docker Container:**
    When running the container, you must pass in your production environment variables.
    ```bash
    docker run -p 8080:8080 \
      -e DATABASE_URL="your_production_db_url" \
      -e JWT_SECRET_KEY="your_production_jwt_secret" \
      -e CORS_ALLOWED_ORIGIN="https://your-dashboard.com" \
      -e SENDGRID_API_KEY="your_production_sendgrid_key" \
      -e DEFAULT_SENDER_EMAIL="noreply@yourdomain.com" \
      -e OTP_TEMPLATE_ID="d-xxxxxxxx" \
      your-api-server-image
    ```

4.  **Choosing a Hosting Provider**

    You can deploy your Docker container to any hosting service that supports them. Popular choices include:

    -   [Google Cloud Run](https://cloud.google.com/run/docs/deploying)
    -   [Amazon ECS](https://aws.amazon.com/ecs/)
    -   [Microsoft Azure Container Apps](https://azure.microsoft.com/en-us/products/container-apps)
    -   [DigitalOcean App Platform](https://www.digitalocean.com/products/app-platform)
    -   [Render](https://render.com/docs/docker)

    Follow your chosen provider's documentation for deploying a Docker container image and configuring the necessary environment variables.

</Steps>
